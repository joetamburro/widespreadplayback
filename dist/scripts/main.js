console.log("hello view script"),HomeView=Backbone.View.extend({template:_.template($("#home-view-template").text()),events:{"click #home-setlist li":"currentSelection","click .left-triangle":"priorShow","click .right-triangle":"nextShow"},initialize:function(){$("#home-setlist").html(""),$(".content-area").append(this.el),this.render(),console.log("rendered home view")},render:function(){this.$el.append(this.template);var a=Parse.Object.extend("Songs"),b=new Parse.Query(a);Date.prototype.formattedDate=function(){var a=(this.getMonth()+1).toString(),b=this.getDate().toString();return(a[1]?a:"0"+a[0])+(b[1]?b:"0"+b[0])};var c=new Date;window.currentDate=c.formattedDate(),b.startsWith("month_day",window.currentDate),console.log(window.currentDate),b.find({success:function(a){_.each(a,function(a){var b=$('<li data="'+a.get("url")+'">'+a.get("title")+"</li>");$("#home-setlist").append(b),b.click(function(){window.currentlyPlayingShowId=a.get("show_id"),console.log(window.currentlyPlayingShowId);var b=$(this).attr("data"),c=$(this).text();$(".jp-title ul li").text(c),$("#jquery_jplayer_1").jPlayer("destroy"),$("#jquery_jplayer_1").jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:b}).jPlayer("play")},swfPath:"/js",supplied:"mp3"})})})}})},currentSelection:function(a){$("#home-setlist li").removeClass("active"),$(a.currentTarget).addClass("active")},currentlyPlaying:function(){$(".content-area").html(""),new CurrentlyPlayingView},priorShow:function(){$("#home-setlist").html("");var a=Parse.Object.extend("Songs"),b=new Parse.Query(a);Date.prototype.priorDate=function(){var a=(this.getMonth()+1).toString(),b=this.getDate().toString();return(a[1]?a:"0"+a[0])+((b[1]?b:"0"+b[0])-1)};var c=(new Date).priorDate();b.startsWith("month_day",c),console.log(c),b.find({success:function(a){_.each(a,function(a){var b=$('<li data="'+a.get("url")+'">'+a.get("title")+"</li>");$("#home-setlist").append(b),b.click(function(){window.currentlyPlayingShowId=a.get("show_id");var b=$(this).attr("data"),c=$(this).text();$(".jp-title ul li").text(c),$("#jquery_jplayer_1").jPlayer("destroy"),$("#jquery_jplayer_1").jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:b}).jPlayer("play")},swfPath:"/js",supplied:"mp3"})})})}})},nextShow:function(){console.log("its clear"),$("#home-setlist").html("");var a=Parse.Object.extend("Songs"),b=new Parse.Query(a);Date.prototype.nextDate=function(){var a=(this.getMonth()+1).toString(),b=this.getDate().toString();return(a[1]?a:"0"+a[0])+((b[1]?b:"0"+b[0])+2)};var c=(new Date).nextDate();console.log(c),b.startsWith("month_day",c),b.find({success:function(a){_.each(a,function(a){var b=$('<li data="'+a.get("url")+'">'+a.get("title")+"</li>");console.log(b),$("#home-setlist").append(b),b.click(function(){window.currentlyPlayingShowId=a.get("show_id"),$(this).attr("data");var b=$(this).text();$(".jp-title ul li").text(b),$("#jquery_jplayer_1").jPlayer("destroy"),$("#jquery_jplayer_1").jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:priorurl}).jPlayer("play")},swfPath:"/js",supplied:"mp3"})})})}})}}),CurrentlyPlayingView=Backbone.View.extend({template:_.template($("#currently-playing-template").text()),events:{"click #current-setlist li":"currentSelection","click .left-triangle":"previousShow"},initialize:function(){$(".content-area").append(this.el),this.render()},render:function(){this.$el.append(this.template);var a=Parse.Object.extend("Songs"),b=new Parse.Query(a);b.equalTo("show_id",window.currentlyPlayingShowId||"20001230"),b.find({success:function(a){_.each(a,function(a){$("#current-setlist").append('<li data="'+a.get("url")+'">'+a.get("title")+"</li>"),$("#current-setlist li").click(function(){var a=$(this).attr("data"),b=$(this).text();$(".jp-title ul li").text(b),$("#jquery_jplayer_1").jPlayer("destroy"),$("#jquery_jplayer_1").jPlayer({ready:function(){$(this).jPlayer("setMedia",{mp3:a}).jPlayer("play")},swfPath:"/js",supplied:"mp3"})})})}})},currentSelection:function(a){$("#current-setlist li").removeClass("active"),$(a.currentTarget).addClass("active")}}),Date.prototype.formattedDate=function(){var a=this.getFullYear().toString(),b=(this.getMonth()+1).toString(),c=this.getDate().toString();return a+(b[1]?b:"0"+b[0])+(c[1]?c:"0"+c[0])};var d=new Date,currentDate=d.formattedDate();console.log("hello model script"),Parse.initialize("IcrKT3lOzRYhBYuQF4FMFFa4j3EtXvnEnYAV813F","gC1DTb1eEUW9uK1Zs5KcJCfnxnyAXjOyneemCDSu"),Song=Parse.Object.extend({className:"Song",initialize:function(){console.log("Model initialized!")}}),console.log("hello collection script"),ShowsCollection=Parse.Collection.extend({model:Song,initialize:function(){console.log("Collection instantiated")}}),console.log("hello router script"),AppRouter=Backbone.Router.extend({initialize:function(){},routes:{"":"homeView",home:"homeView",date:"dateView",location:"mapView","currently-playing":"currentlyPlaying"},homeView:function(){$(".content-area").html(""),$(".navigation-bar .nav").first().addClass("current-tab"),new HomeView},currentlyPlaying:function(){$(".content-area").html(""),new CurrentlyPlayingView}});var router=new AppRouter;Backbone.history.start(),console.log("main loaded"),$(".navigation-bar .nav").click(function(){console.log("nav clicked"),$(".navigation-bar .nav").removeClass("current-tab"),$(this).addClass("current-tab")});